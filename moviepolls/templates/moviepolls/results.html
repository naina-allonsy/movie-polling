
<link rel="stylesheet" href="http://kendo.cdn.telerik.com/2018.2.620/styles/kendo.common.min.css" />
<link rel="stylesheet" href="http://kendo.cdn.telerik.com/2018.2.620/styles/kendo.default.min.css" />
<link rel="stylesheet" href="http://kendo.cdn.telerik.com/2018.2.620/styles/kendo.default.mobile.min.css" />

<script src="https://code.jquery.com/jquery-3.3.1.min.js"></script>
<script src="http://kendo.cdn.telerik.com/2018.2.620/js/kendo.all.min.js"></script>
<h1>{{ movie.movie_text }}</h1>
<ul>
{% for choice in movie.choice_set.all %}
    <li>{{ choice.choice_text }} -- {{ choice.votes }} vote{{ choice.votes|pluralize }}</li>
{% endfor %}
</ul>
<div id="example">
    <div class="demo-section k-content wide">
        <div id="chart"></div>
    </div>
    <script>
        function createChart() {
            $("#chart").kendoChart({
                title: {
                    text: "Results"
                },
                legend: {
                    visible: false
                },
                seriesDefaults: {
                    type: "bar"
                },
                series: [{
                    name: "Total Votes",
                    data: [{% for choice in movie.choice_set.all %}"{{choice.votes}}", {% endfor %}]
                }],
                valueAxis: {
                    max: 15,
                    line: {
                        visible: false
                    },
                    minorGridLines: {
                        visible: true
                    },
                    labels: {
                        rotation: "auto"
                    }
                },
                categoryAxis: {
                    categories: [{% for choice in movie.choice_set.all %}"{{choice.choice_text}}", {% endfor %}],
                    majorGridLines: {
                        visible: false
                    }
                },
                tooltip: {
                    visible: true,
                    template: "#= series.name #: #= value #"
                }
            });
        }

        $(document).ready(createChart);
        $(document).bind("kendo:skinChange", createChart);
    </script>
</div>
<div id="example">
        <div class="demo-section k-content wide">
            <div id="chart2"></div>
        </div>
        <script>
            function createPieChart() {
                $("#chart2").kendoChart({
                    title: {
                        position: "bottom",
                        text: "Results"
                    },
                    legend: {
                        visible: false
                    },
                    chartArea: {
                        background: ""
                    },
                    seriesDefaults: {
                        labels: {
                            visible: true,
                            background: "transparent",
                            template: "#= category #: \n #= value# votes"
                        }
                    },
                    series: [{
                        type: "pie",
                        startAngle: 150,
                        data: [{% for choice in movie.choice_set.all %}{category: "{{choice.choice_text}}", value: "{{choice.votes}}"},{% endfor %}]
                    }],
                    tooltip: {
                        visible: true,
                        format: "{0}votes"
                    }
                });
            }
    
            $(document).ready(createPieChart);
            $(document).bind("kendo:skinChange", createPieChart);
        </script>
    </div>
    
<a href="{% url 'moviepolls:detail' movie.id %}">Vote again?</a>  
      